{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,KAAMC,SAASC,cAAc,kBAC7BC,MAAOF,SAASC,cAAc,kBAC9BE,SAAUH,SAASC,cAAc,qBAGnCH,EAAKC,KAAKK,iBAAiB,SAAS,EAAAR,EAAAS,WAOpC,WACEC,EAAW,CACTC,MAAOT,EAAKI,MAAMM,MAAMC,OACxBC,QAASZ,EAAKK,SAASK,MAAMC,QAG/BE,aAAaC,QAAQC,EAAkBC,KAAKC,UAAUT,G,GAbE,MAC1DR,EAAKC,KAAKK,iBAAiB,UAe3B,SAAsBY,GACpBA,EAAEC,iBAEF,IAA2BC,EAAAF,EAAEG,cAAcC,SAAnCb,EAAmBW,EAAnBX,MAAOG,EAAYQ,EAAZR,QAEK,KAAhBH,EAAMC,OAAkC,KAAlBE,EAAQF,OAChCa,MAAM,mCAGR,IAAMC,EAAY,CAChBf,MAAOA,EAAMC,MAAMC,OACnBC,QAASA,EAAQF,MAAMC,QAEzBc,QAAQC,IAAIF,GAERX,aAAac,QAAQZ,IACvBF,aAAae,WAAWb,GAG1Bf,EAAKC,KAAK4B,QACVrB,EAAW,E,IAjCb,IAqCQsB,EArCFf,EAAmB,sBACrBP,EAAW,GAoCPsB,EAAoBd,KAAKe,MAAMlB,aAAac,QAAQZ,IAEtDF,aAAac,QAAQZ,KACvBf,EAAKI,MAAMM,MAAQoB,EAAkBrB,MACrCT,EAAKK,SAASK,MAAQoB,EAAkBlB,Q","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from 'lodash';\n\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('[name=\"email\"]'),\n  textarea: document.querySelector('[name=\"message\"]'),\n};\n\nrefs.form.addEventListener('input', throttle(onInputData, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\nconst LOCALSTORAGE_KEY = 'feedback-form-state';\nlet formData = {};\nreloadPage();\n\nfunction onInputData() {\n  formData = {\n    email: refs.input.value.trim(),\n    message: refs.textarea.value.trim(),\n  };\n\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  const { email, message } = e.currentTarget.elements;\n\n  if (email.value === '' || message.value === '') {\n    alert('Все поля должны быть заполнены!');\n  }\n\n  const valueForm = {\n    email: email.value.trim(),\n    message: message.value.trim(),\n  };\n  console.log(valueForm);\n\n  if (localStorage.getItem(LOCALSTORAGE_KEY)) {\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n  }\n\n  refs.form.reset();\n  formData = {};\n}\n\nfunction reloadPage() {\n  const localStorageValue = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n\n  if (localStorage.getItem(LOCALSTORAGE_KEY)) {\n    refs.input.value = localStorageValue.email;\n    refs.textarea.value = localStorageValue.message;\n  }\n}\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$refs","form","document","querySelector","input","textarea","addEventListener","throttle","$b00c40859be242c5$var$formData","email","value","trim","message","localStorage","setItem","$b00c40859be242c5$var$LOCALSTORAGE_KEY","JSON","stringify","e","preventDefault","_elements","currentTarget","elements","alert","valueForm","console","log","getItem","removeItem","reset","localStorageValue","parse"],"version":3,"file":"03-feedback.12006d19.js.map"}